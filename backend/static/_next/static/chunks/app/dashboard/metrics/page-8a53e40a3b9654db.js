(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[839],{36771:(e,s,t)=>{Promise.resolve().then(t.bind(t,74060))},74060:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>A});var a=t(95155),l=t(12115),i=t(88482),r=t(97168),c=t(49026),n=t(88145),d=t(31886),x=t(76052),m=t(83540),o=t(42151),h=t(94754),u=t(96025),j=t(52071),p=t(38124),f=t(12319),v=t(77557),N=t(35169),g=t(69074),b=t(14186),y=t(33109),_=t(6874),w=t.n(_);let k=["#8884d8","#82ca9d","#ffc658","#ff7c7c","#8dd1e1","#d084d0","#ffb347","#87ceeb","#dda0dd","#98fb98"];function Z(e){return e>=99.5?"text-green-600":e>=95?"text-yellow-600":"text-red-600"}function E(e){return e>=99.5?(0,a.jsx)(n.E,{className:"bg-green-100 text-green-800",children:"Excellent"}):e>=95?(0,a.jsx)(n.E,{className:"bg-yellow-100 text-yellow-800",children:"Good"}):(0,a.jsx)(n.E,{className:"bg-red-100 text-red-800",children:"Poor"})}function A(){var e;let[s,t]=(0,l.useState)(null),[n,_]=(0,l.useState)(!0),[A,B]=(0,l.useState)(""),[S,W]=(0,l.useState)("daily"),{user:D}=(0,x.A)();(0,l.useEffect)(()=>{D&&M()},[D,S]);let M=async()=>{try{_(!0),console.log("Loading metrics data for period:",S);let e=await d.uZ.getUptimeMetrics(S);t(e),B("")}catch(t){var e,s;B((null==(s=t.response)||null==(e=s.data)?void 0:e.detail)||t.message||"Failed to load metrics data"),console.error("Metrics error:",t)}finally{_(!1)}};if(n)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});let R=(null==s||null==(e=s.services[0])?void 0:e.data_points.map((e,t)=>{let a={label:e.label,timestamp:e.timestamp};return s.services.forEach((e,s)=>{var l;a[e.service_name]=(null==(l=e.data_points[t])?void 0:l.uptime_percentage)||0}),a}))||[];return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(w(),{href:"/dashboard",children:(0,a.jsxs)(r.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(N.A,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Uptime Metrics"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Monitor service uptime performance over time"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(r.$,{variant:"daily"===S?"default":"outline",onClick:()=>W("daily"),className:"flex items-center space-x-2",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"30 Days"})]}),(0,a.jsxs)(r.$,{variant:"hourly"===S?"default":"outline",onClick:()=>W("hourly"),className:"flex items-center space-x-2",children:[(0,a.jsx)(b.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"24 Hours"})]})]})]}),A&&(0,a.jsx)(c.Fc,{variant:"destructive",children:(0,a.jsx)(c.TN,{children:A})}),s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Overall Uptime"}),(0,a.jsx)(y.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(Z(s.overall_uptime)),children:[s.overall_uptime,"%"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[E(s.overall_uptime),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:s.period_label})]})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Services Monitored"})}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.services.length}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active services"})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Data Points"})}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:R.length}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"daily"===S?"Days tracked":"Hours tracked"})]})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Service Uptime Over Time"}),(0,a.jsxs)(i.BT,{children:[s.period_label," - ","daily"===S?"Daily":"Hourly"," view"]})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(m.u,{width:"100%",height:"100%",children:(0,a.jsxs)(o.b,{data:R,margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(h.d,{strokeDasharray:"3 3"}),(0,a.jsx)(u.W,{dataKey:"label",tick:{fontSize:12},angle:"hourly"===S?-45:0,textAnchor:"hourly"===S?"end":"middle",height:"hourly"===S?60:30}),(0,a.jsx)(j.h,{domain:[90,100],tick:{fontSize:12},label:{value:"Uptime %",angle:-90,position:"insideLeft"}}),(0,a.jsx)(p.m,{formatter:(e,s)=>["".concat(e.toFixed(2),"%"),s],labelFormatter:e=>"Time: ".concat(e)}),(0,a.jsx)(f.s,{}),s.services.map((e,s)=>(0,a.jsx)(v.N,{type:"monotone",dataKey:e.service_name,stroke:k[s%k.length],strokeWidth:2,dot:{r:4},activeDot:{r:6}},e.service_id))]})})})})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.services.map(e=>(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{className:"text-lg",children:e.service_name}),(0,a.jsx)(i.BT,{children:"Individual service performance"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Average Uptime:"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"font-bold ".concat(Z(e.overall_uptime)),children:[e.overall_uptime,"%"]}),E(e.overall_uptime)]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Recent Performance:"}),(0,a.jsx)("div",{className:"flex space-x-1 h-2",children:e.data_points.slice(-14).map((e,s)=>(0,a.jsx)("div",{className:"flex-1 rounded-sm ".concat(e.uptime_percentage>=99.5?"bg-green-500":e.uptime_percentage>=95?"bg-yellow-500":"bg-red-500"),title:"".concat(e.label,": ").concat(e.uptime_percentage,"%")},s))}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Last ",Math.min(14,e.data_points.length)," ","daily"===S?"days":"hours"]})]})]})})]},e.service_id))})]}),!s&&!n&&!A&&(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"No metrics data available"})})})]})}}},e=>{e.O(0,[40,455,874,2,559,441,964,358],()=>e(e.s=36771)),_N_E=e.O()}]);